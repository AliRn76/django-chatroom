{% load static %}

<html>
<header>
  <link rel="stylesheet" type="text/css" href="{% static 'upload.css' %}">
</header>
<body>
    <a href="/">Home</a>
    <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
        <br>
        <br>
    <button class="liquid-button" type="submit">Upload</button>
  </form>

    <a href="../{{last_upload}}" target="_blank">{{last_upload}}</a>

  <div class="dropdown">
    <button onclick="myFunction()" class="dropbtn">My Uploads</button>
    <div id="myDropdown" class="dropdown-content">
        {% for link in my_links%}
        <span><a style="float:left" href="..{{ link.document.url }}" target="_blank" ><b style="color:black">{{forloop.counter}}.</b> {{ link.document.url }}</a><a style="float:left; color:red; text-decoration: none;" href="/upload/{{forloop.counter}}/delete" ><b>Delete</b></a> <br></span>
        {% endfor %}

    </div>
  </div>

  <script>
  function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
    if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
  }

    const button = document.querySelector('.liquid-button');
    button.addEventListener('click', () => {
        let count = 0;
        const counter = () => {
            if (count < 100) {
                count++;
                button.innerText = count + '%';
                button.style.animation = 'wave 5500ms ease-in-out forwards';
                count < 55
                    ? (button.style.color = '#000')
                    : (button.style.color = '#fff');
            } else {
                clearInterval(animation);
                button.innerHTML = '<i class="fas fa-check"></i>';
            }
        };
        const animation = setInterval(counter, 40);
    });

  </script>

</body>
</html>


